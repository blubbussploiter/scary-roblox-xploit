#pragma once

#include <queue>

#include "..\output.h"
#include "util/jssocket.h"

class ExploitHandler
{
private:

	jssocket* s;
	jssocketconn* c;

	static ExploitHandler* self;

public:

	std::queue<std::string> scripts;

	void writeScript(std::string script)
	{
		scripts.push(script);
	}
		
	void establish(int port)
	{
		s = new jssocket(port, 1, 1);
		output::printf("[external communicator]: established Communication Server on port %d (for external use)\n", port);
	}
	
	void step();

	void close();
	
	static ExploitHandler* get();
};